<?xml version="1.0"?>

<!--
 Copyright 2004 Sun Microsystems, Inc. All rights reserved.
 SUN PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
-->

<!--
  base dir has to be jaxb-ri for this to be work correctly
  when it's called from the jaxb-ri/build.xml

  $Id: build.xml,v 1.1 2005-04-15 20:08:38 kohsuke Exp $
-->
<project name="toc-processor" basedir="../.." default="jar">

    <!-- import build properties -->
    <property file="${basedir}/build.properties" />
    <property name="name" value="toc-processor" />
    <property name="root" value="${jaxb.root}/tools/${name}" />
    
    <target name="compile">
        <mkdir dir="${root}/build/classes" />
        <javac srcdir="${root}/src" destdir="${root}/build/classes"
            debug="${compile.debug}" optimize="${compile.optimize}">
            <classpath>
                <fileset dir="${jaxb.libs.redist}" includes="*.jar"/>
                <fileset dir="${jaxb.libs.rebundle}" includes="**/*.jar"/>
                <fileset dir="${jaxb.libs.util}" includes="*.jar"/>
            </classpath>
        </javac>
        <copy todir="${root}/build/classes">
            <fileset dir="${root}/src" includes="**/*.xsl"/>
        </copy>
    </target>
    
    <target name="jar" depends="compile">
        <jar destfile="${root}/build/${name}.jar">
            <fileset dir="${root}/build/classes"/>
        </jar>
        <zip destfile="${root}/build/${name}.src.zip">
            <fileset dir="${root}/src"/>
        </zip>
        <copy todir="${jaxb.libs.util}" 
              file="${root}/build/${name}.jar" />
    </target>
    
    <target name="clean">
        <delete dir="${root}/build" />
    </target>
</project>
